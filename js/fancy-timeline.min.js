/*! Fancy-TimeLine v.1.0 http://juanma-aguero.github.com/fancy-timeline/ */
(function(e){e.fn.fancyTimeline=function(t){var n=0;var r=0;var i=0;var s=0;var o=20;i=350;var u=50;html='<div id="timeline" class="timeline">';html+='	<div id="timeline-slider"></div>';html+="		<div>";html+='    		<div id="timeline-dates-line"></div>';html+='    		<div id="timeline-dates"></div>';html+="		</div>";html+='	<div id="backward" class="arrow" ><span><</span></div>';html+='	<div id="forward" class="arrow" ><span>></span></div>';html+="</div>";e(this).append(html);var a={positionTo:function(t){var n=e(window).width()/2;var r=e("#pointer-date-"+t).offset();var i=r.left-n;var s=e("#timeline-dates").offset();var o=s.left-i-e("#timeline").offset().left;e("#timeline-dates").animate({left:o},400)},sliderTo:function(t){e(".timeline-item").removeClass("active");e(".pointer-date").animate({height:20,borderLeftWidth:"2px",top:0},100);e(".date").animate({marginTop:0,marginLeft:-10},100);e(".date-focus").toggleClass("date-focus",100);var r=e(window).width()/2;var s=e("#date-"+t).offset();var o=s.left-r;var u=e("#timeline-slider").offset();var f=u.left-o-e("#timeline").offset().left-i/2;a.positionTo(t);e("#timeline-slider").animate({left:f},800);e("#date-"+t).toggleClass("active",500);e("#pointer-date-"+t).animate({height:45,borderLeftWidth:"5px",top:-11},300);e("#pointer-"+t).animate({marginTop:15,marginLeft:-20},200);e("#pointer-"+t).toggleClass("date-focus",200);n=t},moveForward:function(){if(n<r){a.sliderTo(n+1)}else{a.sliderTo(0)}},moveBackward:function(){if(n>0){a.sliderTo(n-1)}else{a.sliderTo(r)}}};var f="";var l="";var c=t.data;r=c.length-1;e("#middle").css("left",e(window).width()/2-e("#timeline").offset().left);var h=(o+i)*(c.length+1);e("#timeline-slider").css("width",h);var p=u*(c.length+1);e("#timeline-dates").css("width",p);var d=0;for(d=0;d<c.length;d++){var v=c[d];var m="";if(v.type=="default"){m+='<div id="date-'+d+'" class="timeline-item item-default" >';m+='<div class="timeline-item-content" >';m+='<span class="title">'+v.title+"</span>";m+=v.content;m+="</div>";m+="</div>"}if(v.type=="youtube-video"){m+='<div id="date-'+d+'" class="timeline-item item-youtube-video" >';m+='<div class="timeline-item-content" >';m+='<span class="title">'+v.title+"</span>";m+='<iframe width="260" height="160" src="http://www.youtube.com/embed/'+v.youtubeId+'" frameborder="0" allowfullscreen></iframe>';m+="<p>"+v.content+"</p>";m+="</div>";m+="</div>"}if(v.type=="image"){m+='<div id="date-'+d+'" class="timeline-item item-image" >';m+='<div class="timeline-item-content" >';m+='<span class="title">'+v.title+"</span>";m+='<img src="http://img01.mr-static.com/photo/Nirvana/Nirvana-03-big.jpg">';m+="<p>"+v.content+"</p>";m+="</div>";m+="</div>"}f+=m;l+='<div class="date-container">';l+='<div class="pointer-date" id="pointer-date-'+d+'" />';l+='<div class="pointer-date-separator" />';l+='<div class="pointer-date-separator" />';l+='<div class="pointer-date-separator" /><br/>';l+='<a class="date" id="pointer-'+d+'">';l+=v.marker;l+="</a>";l+="</div>"}e("#timeline-slider").html(f);e("#timeline-dates").html(l);e(".date").bind("click",function(){var t=e(this).attr("id").split("-");a.sliderTo(t[1])});e(".timeline-item-i").bind("click",function(){e(this).next().toggle()});e("#backward").bind("click",a.moveBackward);e("#forward").bind("click",a.moveForward);a.sliderTo(s)}})(jQuery)
